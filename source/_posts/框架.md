title: 框架
tags: [框架]
date: 2015-12-02 23:39:42
categories: 框架

---

# 关于框架的一些遐想(beta)
[TOC]

## 框架的核心
- Struts2 的核心 Action、Result、Interceptor（拦截器）  
- Spring的核心思想是IOC和AOP,IOC是控制反转的意思，aop就是面向切面编程  
- 其它自己查
- ...

<!-- more -->
它们更多的是从特性来讲框架的核心，但我对框架的理解抽象出来就是：**调度**
1. 对类与类之间的协调
1. 对资源的分配


## 框架要解决的问题
- 低耦合
- 快速响应
- 精简战线
- 应对变化
- 规范约束
- 编不出来了。。。

## 框架模式
**容器** + **服务**
容器可以看作是一个很开放的平台，提供了任何符合规范服务的接入。同时承担着对各个服务的调度。
服务，可以理解为功能的抽象。比如生病了要看大夫，就是要调用一种服务，你不需要指定这个大夫是小王还是小李。
在框架中，我们可以调用数据库操作的服务，但我们调用的时候，不需要指定具体哪个是数据库操作类。你只需要告诉框架，你需要操作数据库就可以了。
服务包括但不限于：
- Db
- Cache
- Helper
- Queue
- Event
- Mail
- Sms
- Log
- Image

## 设计模式和思想
系统级别：
- mvc
- Ioc
- DI
- 事件驱动

业务级别：
- 代理模式
- 状态模式（解决状态流转）
- 队列+发布/订阅（解决业务强依赖）

设计原则：
- 重配置，轻依赖
- 重封装，轻实现
- 重服务，轻实例
- 重规范(PHP-FIG)

## 目标
1. 打造一个比较完整的虚拟生态系统，重点在于各个服务的集成。
> 之所以说虚拟，是因为框架是以服务的形式支撑各业务运行。具体的逻辑实现需要有，但并一定要指明用哪个。
1. 易于使用和快速开发
> 易于使用主要是接口规范这块，快速开发主要是成型的模式和脚手架。
1. 代码质量保证。
> 单测，不用详说了。
1. 有机迭代。
> 封装的好处。

## 提前备注
有必要说明下vendor的存在，它里面只是保留操作方法。具体涉及到一些详细的业务，它不应该主动去完成某些操作。正好比一把斧头，它有砍的功能，具体它来作什么，是我们来决定的，而不是它。
因为现在代码调整，预期的一部分还没开始就说要砍掉。vendor本身就要保留的，lib只作封装。重封装，轻实现，我看重的反而是封装解耦这块。

## 两个例子

### 农民的故事
又到了农活繁忙的时候，一家好几口的坐在一起商量怎么分配农活。当家的指着老大说：你去除草。然后老大就带着锄头吭哧吭哧除草去了。当家的又指着老二说：你去浇地。然后老二带着铁锹哼哈哼哈浇地去了。

### 国务院的故事
又到了农活繁忙的时候，国家领导人很重视农民耕种情况。开会热烈讨论了关于农业的一系列政策。农业部部长发表讲话并提出三项要求。下级部门响应国家政策，认真组织好农村耕种工作。

### 这只是个小总结
实现一系列活动需要多方面配合，有谋划者，有实施者。但对于框架的核心功能来讲，是亲自拿着锄头下地，还是发号施令？
你的选择决定了你看问题的层次。
可能有人会问，为什么一些成熟的，驰名已久的框架必需要有实现功能类，这些类类似db,auth,log,cache,mail,queue..
我的回答是：
> 1. 当时生产力低下，成熟并且规范的类少。
> 2. 为了推销。别人有，他没有，容易丢失小白用户。这也是当时直板手机必须要加个qq平台的原因，而现要手机打电话都可以弃用系统自带的，使用其他打电话软件。

现在PHP-FIG也算是成熟了起来。星际穿越，类库跳转，框架对接因为规范已经成为可能。

## 情景应用（待添加）
### 多种服务并存
### 日志和监控
### 队列
### 事件